{"mappings":"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","sources":["src/scripts/hero-section.js"],"sourcesContent":["import {\n  getTrendingMovies,\n  getGenres,\n  getMovieTrailer,\n} from '../scripts/movie-api';\n\nconst currentDate = new Date().toISOString().split('T')[0];\n\nconst getMoviesForToday = async () => {\n  const movies = await getTrendingMovies();\n  const todayMovies = movies.filter(movie => {\n    const releaseDate = movie.release_date;\n    return releaseDate <= currentDate;\n  });\n  return todayMovies;\n};\n\nconst selectRandomMovie = movies => {\n  if (!movies || movies.length === 0) {\n    return null;\n  }\n\n  const randomIndex = Math.floor(Math.random() * movies.length);\n  return movies[randomIndex];\n};\n\nconst truncateOverview = (overview, maxLength) => {\n  if (overview.length > maxLength) {\n    return overview.slice(0, maxLength) + '...';\n  }\n  return overview;\n};\n\nconst displayMovieInfo = async () => {\n  const genres = await getGenres();\n  const movies = await getMoviesForToday();\n  const randomMovie = selectRandomMovie(movies);\n  const trailer = await getMovieTrailer(randomMovie.id);\n  const heroSection = document.querySelector('#hero-section');\n  const heroTitle = document.querySelector('#hero-title');\n  const heroRating = document.querySelector('#hero-rating');\n  const heroDescription = document.querySelector('#hero-description');\n  const heroButtonsContainer = document.querySelector('.hero-buttons');\n  const movieDetailsContainer = document.querySelector('.movie-card');\n  const trailerContainer = document.querySelector('.movie-trailer-container');\n\n  if (randomMovie) {\n    const movieGenres = randomMovie.genre_ids\n      .map(id => genres[id] || 'Unknown')\n      .join(', ');\n    heroSection.style.background = `linear-gradient(87deg, #111 33.93%, rgba(17, 17, 17, 0.00) 78.91%), url('https://image.tmdb.org/t/p/original${randomMovie.backdrop_path}') lightgray`;\n    heroSection.style.backgroundSize = 'cover';\n    heroSection.style.backgroundPosition = 'center';\n    heroSection.style.backgroundRepeat = 'no-repeat';\n    heroTitle.textContent = randomMovie.title;\n    heroRating.textContent = `Rating:  ${randomMovie.vote_average}`;\n    heroDescription.textContent = truncateOverview(randomMovie.overview, 250);\n\n    heroButtonsContainer.addEventListener('click', e => {\n      e.preventDefault();\n      if (e.target.id === 'more-details') {\n        let html = `\n        \n        <div class=\"hero-movie-details-container\">\n        <button class=\"close-btn\">X</button>\n          <img src=\"https://image.tmdb.org/t/p/original${randomMovie.poster_path}\" alt=\"${randomMovie.title}\" width=\"248\" height=\"315\">\n           <div class=\"hero-movie-details\">\n          <h3 class=\"hero-movie-title\">${randomMovie.title}</h3>\n          <div class=\"hero-movie-info-container\">\n            <div class=\"hero-movie-info\">\n              <p class=\"hero-info-title\"</p>Vote / Votes</p>\n              <p><span class=\"hero-rating-span\">${randomMovie.vote_average}</span> / <span class=\"hero-rating-span\">${randomMovie.vote_count}</span></p>\n            </div>\n            <div class=\"hero-movie-info\">\n              <p class=\"hero-info-title\">Popularity</p><span>${randomMovie.popularity}</span>\n            </div>\n            <div class=\"hero-movie-info\">\n              <p class=\"hero-info-title\">Genre</p><span>${movieGenres}</span>\n            </div>\n          </div>\n          <div class=\"hero-about-info\">\n          <p class=\"hero-info-title\">ABOUT</p>\n          <p class=\"hero-overview\">${randomMovie.overview}</p>\n          </div>\n\n          <button class=\"add-to-library-btn\">Add to my library</button>\n          </div>\n        </div>\n        `;\n\n        movieDetailsContainer.innerHTML = html;\n\n        movieDetailsContainer.classList.remove('is-hidden');\n\n        // Adăugare eveniment pentru închiderea detaliilor\n        const closeBtn = document.querySelector('.close-btn');\n        closeBtn.addEventListener('click', () => {\n          movieDetailsContainer.classList.add('is-hidden');\n        });\n\n        // Adăugare eveniment pentru butonul de bibliotecă\n        const libraryBtn = document.querySelector('.add-to-library-btn');\n        libraryBtn.addEventListener('click', () => {\n          toggleLibrary(randomMovie);\n          libraryBtn.textContent = isInLibrary(randomMovie.id)\n            ? 'Remove from library'\n            : 'Add to my library';\n        });\n\n        const isInLibrary = movieId => {\n          const library = JSON.parse(localStorage.getItem('library')) || [];\n          return library.some(randomMovie => randomMovie.id == movieId);\n        };\n\n        const toggleLibrary = movie => {\n          let library = JSON.parse(localStorage.getItem('library')) || [];\n\n          if (isInLibrary(movie.id)) {\n            library = library.filter(item => item.id != movie.id);\n            localStorage.setItem('library', JSON.stringify(library));\n          } else {\n            library.push(movie);\n            localStorage.setItem('library', JSON.stringify(library));\n          }\n        };\n      } else if (e.target.id === 'watch-trailer') {\n        if (trailer && trailer.key) {\n          let html = `\n        <button class=\"close-btn\">X</button>\n        <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/${trailer.key}\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n    `;\n          trailerContainer.innerHTML = html;\n          trailerContainer.classList.remove('is-hidden');\n        } else {\n          trailerContainer.classList.add('error-container');\n          let html = `\n        <button class=\"close-btn\">X</button>\n        <p class=\"text-warning\">OOPS...<br>\n        We are very sorry!<br>\n        But we couldn’t find the trailer.</p>\n    `;\n          trailerContainer.innerHTML = html;\n          trailerContainer.classList.remove('is-hidden');\n        }\n\n        const trailerCloseBtn = trailerContainer.querySelector('.close-btn');\n        trailerCloseBtn.addEventListener('click', () => {\n          trailerContainer.classList.add('is-hidden');\n        });\n      }\n    });\n  } else {\n    heroSection.style.background = \"url('../images/hero-image.jpg') !important\";\n    heroSection.style.backgroundSize = 'cover';\n    heroSection.style.backgroundPosition = 'center';\n    heroSection.style.backgroundRepeat = 'no-repeat';\n    heroTitle.textContent = 'Let’s Make Your Own Cinema';\n    heroDescription.textContent =\n      \"Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.\";\n    let buttonHtml = `<button class=\"get-started-button\">Get Started</button>`;\n    heroButtonsContainer.innerHTML = buttonHtml;\n  }\n};\n\ndisplayMovieInfo();\n"],"names":["$2bk9a","parcelRequire","$5e1cb174be4c3302$var$currentDate","Date","toISOString","split","async","genres","getGenres","randomMovie1","movies","length","Math","floor","random","$5e1cb174be4c3302$var$selectRandomMovie","getTrendingMovies","filter","movie","release_date","$5e1cb174be4c3302$var$getMoviesForToday","trailer","getMovieTrailer","id","heroSection","document","querySelector","heroTitle","heroRating","heroDescription","heroButtonsContainer","movieDetailsContainer","trailerContainer","movieGenres","genre_ids","map","join","style","background","backdrop_path","backgroundSize","backgroundPosition","backgroundRepeat","textContent","title","vote_average","overview","maxLength","slice","addEventListener","e","preventDefault","target","html","poster_path","vote_count","popularity","innerHTML","classList","remove","add","libraryBtn","toggleLibrary","isInLibrary","movieId","JSON","parse","localStorage","getItem","some","randomMovie","library","item","setItem","stringify","push","key","buttonHtml","$5e1cb174be4c3302$var$displayMovieInfo"],"version":3,"file":"my-library.0111d72e.js.map"}