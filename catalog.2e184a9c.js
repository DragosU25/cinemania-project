var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequirea071;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequirea071=a);var i=a("2bk9a");const r=document.querySelector(".gallery"),s=document.querySelector("form"),o=document.querySelector("#pagination"),c=document.querySelector("#message"),l=document.querySelector("#year-filter-container"),d=document.querySelector("#genre-filter-container"),p=(new Date).toISOString().split("T")[0];let v=1,m="popular";let u=[];const h=async e=>{const t=await(0,i.getGenres)(),n=e.map((e=>{const n=e.genre_ids.map((e=>t[e]||"Unknown")).join(", ");return`\n        <div class="search-section-movie" style="background: linear-gradient(180deg, rgba(0, 0, 0, 0.00) 63.48%, rgba(0, 0, 0, 0.90) 92.16%), url('${e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"../images/hero-image.jpg"}');" data-movie-id="${e.id}">\n          <div class="search-section-movie-card-info">\n            <h3 class="search-section-movie-card-title">${e.name||e.title}</h3> \n            <div class="search-section-movie-card-details">\n              <p class="search-section-movie-card-genre-year">${n} | ${new Date(e.release_date).getFullYear()}</p>\n              <p class="search-section-movie-card-rate">${e.vote_average}</p>\n            </div>\n          </div>\n        </div>\n      `})).join("");r.innerHTML=n,r.querySelectorAll(".search-section-movie").forEach((n=>{n.addEventListener("click",(async a=>{const i=n.dataset.movieId,r=e.find((e=>e.id==i)),s=r.genre_ids.map((e=>t[e]||"Unknown")).join(", "),o=`\n      <div class="search-movie-details-container">\n        <button class="close-btn">X</button>\n        <img src="${r.poster_path?"https://image.tmdb.org/t/p/w500"+r.poster_path:"../images/hero-image.jpg"}" alt="${r.title}" width="248" height="315">\n        <div class="search-movie-details">\n          <h3 class="search-movie-title">${r.title}</h3>\n          <div class="search-movie-info-container">\n            <div class="search-movie-info">\n              <p class="search-info-title">Vote / Votes</p>\n              <p><span class="search-rating-span">${r.vote_average}</span> / <span class="search-rating-span">${r.vote_count}</span></p>\n            </div>\n            <div class="search-movie-info">\n              <p class="search-info-title">Popularity</p><span>${r.popularity}</span>\n            </div>\n            <div class="search-movie-info">\n              <p class="search-info-title">Genre</p><span>${s}</span>\n            </div>\n          </div>\n          <div class="search-about-info">\n            <p class="search-about-info-title">ABOUT</p>\n            <p class="search-overview">${r.overview}</p>\n          </div>\n          <button class="add-to-library-btn">${S(r.id)?"Remove from library":"Add to my library"}</button>\n        </div>\n      </div>\n    `,c=document.getElementById("search-movie-details-container");c.innerHTML=o,c.classList.remove("hidden"),document.querySelector(".close-btn").addEventListener("click",(()=>{c.classList.add("hidden")}));const l=document.querySelector(".add-to-library-btn");l.addEventListener("click",(()=>{$(r),l.textContent=S(r.id)?"Remove from library":"Add to my library"}))}))}))},g=async e=>{v=e;try{const e=await(0,i.searchMovies)(m,v);u=e.results,h(u),f(e.total_pages),b(),L()}catch(e){console.error(e),y("Something went wrong. Please try again.")}},y=e=>{c.innerHTML=`<p>${e}</p>`,r.innerHTML="",o.innerHTML=""},f=e=>{if(o.innerHTML="",e<=1)return;if(v>1){const e=i("<");e.addEventListener("click",(()=>g(v-1))),o.appendChild(e)}const t=Math.min(3,e);let n=v-Math.floor(t/2);n=Math.max(1,n);let a=n+t-1;a=Math.min(e,a);for(let e=n;e<=a;e++){const t=i(e);e===v&&t.classList.add("active"),o.appendChild(t)}if(v<e){const e=i(">");e.addEventListener("click",(()=>g(v+1))),o.appendChild(e)}function i(e){const t=document.createElement("button");return t.innerText=e,t.classList.add("pagination-button"),t.classList.add("light-mode"),e===v&&t.classList.add("active"),"<"!==e&&">"!==e&&t.addEventListener("click",(()=>g(parseInt(e)))),t}},b=()=>{const e=document.createElement("select");e.id="year-filter",e.classList.add("select"),e.innerHTML='<option value="">Year</option>';for(let t=2015;t<=2024;t++)e.innerHTML+=`<option value="${t}">${t}</option>`;e.addEventListener("change",w),l.innerHTML="",l.appendChild(e)},L=async()=>{const e=await(0,i.getGenres)(),t=document.createElement("select");t.id="genre-filter",t.classList.add("select"),t.innerHTML='<option value="">Genre</option>',Object.keys(e).forEach((n=>{t.innerHTML+=`<option value="${n}">${e[n]}</option>`})),t.addEventListener("change",w),d.innerHTML="",d.appendChild(t)},w=()=>{const e=document.querySelector("#year-filter").value,t=document.querySelector("#genre-filter").value;let n=u;e&&(n=n.filter((t=>new Date(t.release_date).getFullYear()==e))),t&&(n=n.filter((e=>e.genre_ids.includes(parseInt(t))))),h(n)},S=e=>(JSON.parse(localStorage.getItem("library"))||[]).some((t=>t.id==e)),$=e=>{let t=JSON.parse(localStorage.getItem("library"))||[];S(e.id)?(t=t.filter((t=>t.id!=e.id)),localStorage.setItem("library",JSON.stringify(t))):(t.push(e),localStorage.setItem("library",JSON.stringify(t)))};s.addEventListener("submit",(async e=>{e.preventDefault();const t=s.searchQuery.value.trim();t?(v=1,m=t,await g(v)):y("Please enter a search query")})),(async()=>{try{const e=await(async()=>(await(0,i.getTrendingMovies)()).filter((e=>e.release_date<=p)))();u=e,h(u),b(),L()}catch(e){console.error(e),y("Something went wrong. Please try again.")}})();
//# sourceMappingURL=catalog.2e184a9c.js.map
