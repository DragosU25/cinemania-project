!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=n.parcelRequirea071;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){r[e]=n},n.parcelRequirea071=a);var i,c,o=a("bpxeT"),s=a("2TvXO"),l=a("2Vquh"),d=document.querySelector(".gallery"),u=document.querySelector("form"),p=document.querySelector("#pagination"),v=document.querySelector("#message"),f=document.querySelector("#year-filter-container"),h=1,m="popular",g="https://image.tmdb.org/t/p/w500",y="../images/alternative-image.png",b=[],w=(i=e(o)(e(s).mark((function n(t){var r,a,i,c;return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,l.getGenres)();case 2:r=n.sent,a=t.map((function(e){var n=e.genre_ids.map((function(e){return r[e]||"Unknown"})).join(", "),t=e.poster_path?"".concat(g).concat(e.poster_path):y;return'\n        <div class="search-section-movie" style="background: linear-gradient(180deg, rgba(0, 0, 0, 0.00) 63.48%, rgba(0, 0, 0, 0.90) 92.16%), url(\''.concat(t,'\');" data-movie-id="').concat(e.id,'">\n          <div class="search-section-movie-card-info">\n            <h3 class="search-section-movie-card-title">').concat(e.name||e.title,'</h3> \n            <div class="search-section-movie-card-details">\n              <p class="search-section-movie-card-genre-year">').concat(n," | ").concat(new Date(e.release_date).getFullYear(),'</p>\n              <p class="search-section-movie-card-rate">').concat(e.vote_average,"</p>\n            </div>\n          </div>\n        </div>\n      ")})).join(""),d.innerHTML=a,d.addEventListener("click",function(){var n=e(o)(e(s).mark((function n(a){var o,l,d,u,p,v,f;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=a.target.closest(".search-section-movie"))&&(l=o.dataset.movieId,d=t.find((function(e){return e.id==l})),u=d.genre_ids.map((function(e){return r[e]||"Unknown"})).join(", "),p='\n      <div class="search-movie-details-container">\n        <button class="close-btn">X</button>\n        <img src="'.concat(d.poster_path?g+d.poster_path:y,'" alt="').concat(d.title,'" width="248" height="315">\n        <div class="search-movie-details">\n          <h3 class="search-movie-title">').concat(d.title,'</h3>\n          <div class="search-movie-info-container">\n            <div class="search-movie-info">\n              <p class="search-info-title">Vote / Votes</p>\n              <p><span class="search-rating-span">').concat(d.vote_average,'</span> / <span class="search-rating-span">').concat(d.vote_count,'</span></p>\n            </div>\n            <div class="search-movie-info">\n              <p class="search-info-title">Popularity</p><span>').concat(d.popularity,'</span>\n            </div>\n            <div class="search-movie-info">\n              <p class="search-info-title">Genre</p><span>').concat(u,'</span>\n            </div>\n          </div>\n          <div class="search-about-info">\n            <p class="search-about-info-title">ABOUT</p>\n            <p class="search-overview">').concat(d.overview,'</p>\n          </div>\n          <button class="add-to-library-btn">').concat(i(d.id)?"Remove from library":"Add to my library","</button>\n        </div>\n      </div>\n    "),(v=document.getElementById("search-movie-details-container")).innerHTML=p,v.classList.remove("hidden"),document.querySelector(".close-btn").addEventListener("click",(function(){v.classList.add("hidden")})),(f=document.querySelector(".add-to-library-btn")).addEventListener("click",(function(){c(d),f.textContent=i(d.id)?"Remove from library":"Add to my library"})));case 2:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),i=function(e){return(JSON.parse(localStorage.getItem("library"))||[]).some((function(n){return n.id==e}))},c=function(e){var n=JSON.parse(localStorage.getItem("library"))||[];i(e.id)?(n=n.filter((function(n){return n.id!=e.id})),localStorage.setItem("library",JSON.stringify(n))):(n.push(e),localStorage.setItem("library",JSON.stringify(n)))};case 8:case"end":return n.stop()}}),n)}))),function(e){return i.apply(this,arguments)}),L=(c=e(o)(e(s).mark((function n(t){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=t,e.prev=1,e.next=4,(0,l.searchMovies)(m,h);case 4:r=e.sent,b=r.results,w(b),M(r.total_pages),S(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),x("Something went wrong. Please try again.");case 15:case"end":return e.stop()}}),n,null,[[1,11]])}))),function(e){return c.apply(this,arguments)}),x=function(e){v.innerHTML="<p>".concat(e,"</p>"),d.innerHTML="",p.innerHTML=""},M=function(e){if(console.log("Rendering pagination for ".concat(e," pages")),p.innerHTML="",!(e<=1)){if(h>1){var n=s("<");n.addEventListener("click",(function(){return L(h-1)})),p.appendChild(n)}var t=Math.min(3,e),r=h-Math.floor(t/2),a=(r=Math.max(1,r))+t-1;a=Math.min(e,a);for(var i=r;i<=a;i++){var c=s(i);i===h&&c.classList.add("active"),p.appendChild(c)}if(h<e){var o=s(">");o.addEventListener("click",(function(){return L(h+1)})),p.appendChild(o)}}function s(e){var n=document.createElement("button");return n.innerText=e,n.classList.add("pagination-button"),e===h&&n.classList.add("active"),"<"!==e&&">"!==e&&n.addEventListener("click",(function(){return L(parseInt(e))})),n}},S=function(){var e=document.createElement("select");e.id="year-filter",e.innerHTML='<option value="">Year</option>';for(var n=2015;n<=2024;n++)e.innerHTML+='<option value="'.concat(n,'">').concat(n,"</option>");e.addEventListener("change",T),f.innerHTML="",f.appendChild(e)},T=function(e){var n=e.target.value;if(n){var t=b.filter((function(e){return new Date(e.release_date).getFullYear()==n}));w(t)}else w(b)};u.addEventListener("submit",function(){var n=e(o)(e(s).mark((function n(t){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=u.searchQuery.value.trim()){e.next=5;break}return x("Please enter a search query"),e.abrupt("return");case 5:return h=1,m=r,e.next=9,L(h);case 9:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),M(0),L(h)}();
//# sourceMappingURL=catalog.b0096241.js.map
