{"mappings":"iiBAAA,I,EAAAA,EAAAC,EAAA,S,0BACMC,GAAc,IAAIC,MAAOC,cAAcC,MAAM,KAAK,GAClDC,G,EAAoBC,EAAAP,EAAA,CAAAO,EAAAC,GAAAC,MAAA,SAAAC,I,IAClBC,EACAC,E,mFADe,EAAAC,EAAAC,qB,cAAfH,EAAMI,EAAAC,KACNJ,EAAcD,EAAOM,QAAO,SAAAC,GAEhC,OADoBA,EAAMC,cACJjB,C,sBAEjBU,G,uFAGHQ,EAAoB,SAAAT,GACxB,OAAKA,GAA4B,IAAlBA,EAAOU,OAKfV,EADaW,KAAKC,MAAMD,KAAKE,SAAWb,EAAOU,SAH7C,I,EAOLI,EAAgB,W,MAAGlB,EAAAP,EAAA,CAAAO,EAAAC,GAAAC,MAAA,SAAAC,I,IACjBgB,EACAf,EACAgB,EACAC,EAGAC,EAIAC,EAKAC,EAuCEC,EAQAC,EAKAC,E,mFAnEa,EAAArB,EAAAsB,a,cAAfT,EAAMX,EAAAC,K,SACSV,I,OAAfK,EAAMI,EAAAC,KACNW,EAAcP,EAAkBT,GAChCiB,EAAyBQ,SAASC,cACtC,6BAEIR,EAAeF,EAAYW,cAC7BX,EAAYW,cACZ,qBAEER,EAAaH,EAAYY,UAC5BC,KAAI,SAAAC,G,OAAMf,EAAOe,IAAO,S,IACxBC,KAAK,MAEJf,IACEI,EAAO,2GAI0BY,OAH8Dd,EAAa,sHASxEc,OANHhB,EAAYiB,MAAM,iOAUTD,OAJNhB,EAAYR,aAAa,iJAISwB,OAA5BhB,EAAYkB,WAAW,OAMjBF,OANsBhB,EAAYmB,aAAa,uOAUrDH,OAJMhB,EAAYoB,WAAW,0IAS9DJ,OALiCb,EAAW,qHAKvBa,OAArBhB,EAAYqB,SAAS,mIAOlCpB,EAAuBqB,UAAYlB,GAG7BC,EAAaI,SAASC,cAAc,wBAC/Ba,iBAAiB,SAAS,WACnChB,EAAcP,GACdK,EAAWmB,YAAclB,EAAYN,EAAYc,IAC7C,sBACA,mB,IAGAR,EAAc,SAAAmB,GAElB,OADgBC,KAAKC,MAAMC,aAAaC,QAAQ,aAAe,IAChDC,MAAK,SAAAC,G,OAAeA,EAAYjB,IAAMW,C,KAGjDlB,EAAgB,SAAAhB,GACpB,IAAIyC,EAAUN,KAAKC,MAAMC,aAAaC,QAAQ,aAAe,GAEzDvB,EAAYf,EAAMuB,KACpBkB,EAAUA,EAAQ1C,QAAO,SAAA2C,G,OAAQA,EAAKnB,IAAMd,EAAYc,E,IACxDc,aAAaM,QAAQ,UAAWR,KAAKS,UAAUH,MAE/CA,EAAQI,KAAK7C,GACbqC,aAAaM,QAAQ,UAAWR,KAAKS,UAAUH,I,iGA5EjC,GAkFtBlC,G","sources":["src/scripts/upcoming-movies.js"],"sourcesContent":["import { getGenres, getUpcomingMovies } from '../scripts/movie-api';\nconst currentDate = new Date().toISOString().split('T')[0];\nconst getMoviesForToday = async () => {\n  const movies = await getUpcomingMovies();\n  const todayMovies = movies.filter(movie => {\n    const releaseDate = movie.release_date;\n    return releaseDate <= currentDate;\n  });\n  return todayMovies;\n};\n\nconst selectRandomMovie = movies => {\n  if (!movies || movies.length === 0) {\n    return null;\n  }\n\n  const randomIndex = Math.floor(Math.random() * movies.length);\n  return movies[randomIndex];\n};\n\nconst displayMovieInfo = async () => {\n  const genres = await getGenres();\n  const movies = await getMoviesForToday();\n  const randomMovie = selectRandomMovie(movies);\n  const upcomingMovieContainer = document.querySelector(\n    '.upcoming-movie-container'\n  );\n  const backdropPath = randomMovie.backdrop_path\n    ? randomMovie.backdrop_path\n    : 'default-poster.jpg';\n\n  const genreNames = randomMovie.genre_ids\n    .map(id => genres[id] || 'Unknown')\n    .join(', ');\n\n  if (randomMovie) {\n    let html = `\n      <div class=\"image-container\"  style=\"background-image: url('https://image.tmdb.org/t/p/original${backdropPath}')\">\n      </div>\n      <div class=\"upcoming-movie-details-container\">\n      <h2 class=\"upcoming-movie-title\">${randomMovie.title}</h2>\n\n       <div class=\"movie-info\">\n        <div class=\"upcoming-movie-details-flex-container\">\n        <div class=\"release-date \">\n            <span>Release date</span>\n            <span class=\"date align-left\">${randomMovie.release_date}</span>\n        </div>\n        <div class=\"votes\">\n            <span>Vote / Votes</span>\n            <span class=\"vote-count align-left\">${randomMovie.vote_count} / ${randomMovie.vote_average}</span>\n        </div>\n        </div>\n        <div class=\"upcoming-movie-details-flex-container\">\n        <div class=\"popularity\">\n            <span>Popularity</span>\n            <span class=\"popularity-score align-left\">${randomMovie.popularity}</span>\n        </div>\n        <div class=\"genre\">\n            <span>Genre</span>\n            <span class=\"genre-type align-left\">${genreNames}</span>\n        </div>\n        </div>\n        <div class=\"about\">\n            <h2>ABOUT</h2>\n            <p>${randomMovie.overview}</p>\n        </div>\n        <button class=\"add-to-library-btn\">Add to my library</button>\n    </div>\n      </div>\n        `;\n\n    upcomingMovieContainer.innerHTML = html;\n\n    // Adăugare eveniment pentru butonul de bibliotecă\n    const libraryBtn = document.querySelector('.add-to-library-btn');\n    libraryBtn.addEventListener('click', () => {\n      toggleLibrary(randomMovie);\n      libraryBtn.textContent = isInLibrary(randomMovie.id)\n        ? 'Remove from library'\n        : 'Add to my library';\n    });\n\n    const isInLibrary = movieId => {\n      const library = JSON.parse(localStorage.getItem('library')) || [];\n      return library.some(randomMovie => randomMovie.id == movieId);\n    };\n\n    const toggleLibrary = movie => {\n      let library = JSON.parse(localStorage.getItem('library')) || [];\n\n      if (isInLibrary(movie.id)) {\n        library = library.filter(item => item.id != randomMovie.id);\n        localStorage.setItem('library', JSON.stringify(library));\n      } else {\n        library.push(movie);\n        localStorage.setItem('library', JSON.stringify(library));\n      }\n    };\n  }\n};\n\ndisplayMovieInfo();\n"],"names":["$bpxeT","parcelRequire","$72ac0342efbac2cc$var$currentDate","Date","toISOString","split","$72ac0342efbac2cc$var$getMoviesForToday","$parcel$interopDefault","$2TvXO","mark","_callee","movies","todayMovies","$2Vquh","getUpcomingMovies","_ctx","sent","filter","movie","release_date","$72ac0342efbac2cc$var$selectRandomMovie","length","Math","floor","random","$72ac0342efbac2cc$var$displayMovieInfo","genres","randomMovie1","upcomingMovieContainer","backdropPath","genreNames","html","libraryBtn","isInLibrary","toggleLibrary","getGenres","document","querySelector","backdrop_path","genre_ids","map","id","join","concat","title","vote_count","vote_average","popularity","overview","innerHTML","addEventListener","textContent","movieId","JSON","parse","localStorage","getItem","some","randomMovie","library","item","setItem","stringify","push"],"version":3,"file":"index.74fc2ba5.js.map"}