var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequirea071;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequirea071=a);var i=a("2bk9a");const r=document.querySelector(".gallery"),s=document.querySelector("form"),o=document.querySelector("#pagination"),c=document.querySelector("#message"),l=document.querySelector("#year-filter-container");let d=1,p="popular";let v=[];const m=async e=>{const t=await(0,i.getGenres)(),n=e.map((e=>{const n=e.genre_ids.map((e=>t[e]||"Unknown")).join(", ");return`\n        <div class="search-section-movie" style="background: linear-gradient(180deg, rgba(0, 0, 0, 0.00) 63.48%, rgba(0, 0, 0, 0.90) 92.16%), url('${e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"../images/alternative-image.png"}');" data-movie-id="${e.id}">\n          <div class="search-section-movie-card-info">\n            <h3 class="search-section-movie-card-title">${e.name||e.title}</h3> \n            <div class="search-section-movie-card-details">\n              <p class="search-section-movie-card-genre-year">${n} | ${new Date(e.release_date).getFullYear()}</p>\n              <p class="search-section-movie-card-rate">${e.vote_average}</p>\n            </div>\n          </div>\n        </div>\n      `})).join("");r.innerHTML=n,r.addEventListener("click",(async n=>{const i=n.target.closest(".search-section-movie");if(i){const n=i.dataset.movieId,r=e.find((e=>e.id==n)),o=r.genre_ids.map((e=>t[e]||"Unknown")).join(", "),c=`\n      <div class="search-movie-details-container">\n        <button class="close-btn">X</button>\n        <img src="${r.poster_path?"https://image.tmdb.org/t/p/w500"+r.poster_path:"../images/alternative-image.png"}" alt="${r.title}" width="248" height="315">\n        <div class="search-movie-details">\n          <h3 class="search-movie-title">${r.title}</h3>\n          <div class="search-movie-info-container">\n            <div class="search-movie-info">\n              <p class="search-info-title">Vote / Votes</p>\n              <p><span class="search-rating-span">${r.vote_average}</span> / <span class="search-rating-span">${r.vote_count}</span></p>\n            </div>\n            <div class="search-movie-info">\n              <p class="search-info-title">Popularity</p><span>${r.popularity}</span>\n            </div>\n            <div class="search-movie-info">\n              <p class="search-info-title">Genre</p><span>${o}</span>\n            </div>\n          </div>\n          <div class="search-about-info">\n            <p class="search-about-info-title">ABOUT</p>\n            <p class="search-overview">${r.overview}</p>\n          </div>\n          <button class="add-to-library-btn">${a(r.id)?"Remove from library":"Add to my library"}</button>\n        </div>\n      </div>\n    `,l=document.getElementById("search-movie-details-container");l.innerHTML=c,l.classList.remove("hidden");document.querySelector(".close-btn").addEventListener("click",(()=>{l.classList.add("hidden")}));const d=document.querySelector(".add-to-library-btn");d.addEventListener("click",(()=>{s(r),d.textContent=a(r.id)?"Remove from library":"Add to my library"}))}}));const a=e=>(JSON.parse(localStorage.getItem("library"))||[]).some((t=>t.id==e)),s=e=>{let t=JSON.parse(localStorage.getItem("library"))||[];a(e.id)?(t=t.filter((t=>t.id!=e.id)),localStorage.setItem("library",JSON.stringify(t))):(t.push(e),localStorage.setItem("library",JSON.stringify(t)))}},u=async e=>{d=e;try{const e=await(0,i.searchMovies)(p,d);v=e.results,m(v),h(e.total_pages),f()}catch(e){console.error(e),g("Something went wrong. Please try again.")}},g=e=>{c.innerHTML=`<p>${e}</p>`,r.innerHTML="",o.innerHTML=""},h=e=>{if(console.log(`Rendering pagination for ${e} pages`),o.innerHTML="",e<=1)return;if(d>1){const e=i("<");e.addEventListener("click",(()=>u(d-1))),o.appendChild(e)}const t=Math.min(3,e);let n=d-Math.floor(t/2);n=Math.max(1,n);let a=n+t-1;a=Math.min(e,a);for(let e=n;e<=a;e++){const t=i(e);e===d&&t.classList.add("active"),o.appendChild(t)}if(d<e){const e=i(">");e.addEventListener("click",(()=>u(d+1))),o.appendChild(e)}function i(e){const t=document.createElement("button");return t.innerText=e,t.classList.add("pagination-button"),e===d&&t.classList.add("active"),"<"!==e&&">"!==e&&t.addEventListener("click",(()=>u(parseInt(e)))),t}},f=()=>{const e=document.createElement("select");e.id="year-filter",e.innerHTML='<option value="">Year</option>';for(let t=2015;t<=2024;t++)e.innerHTML+=`<option value="${t}">${t}</option>`;e.addEventListener("change",y),l.innerHTML="",l.appendChild(e)},y=e=>{const t=e.target.value;if(t){const e=v.filter((e=>new Date(e.release_date).getFullYear()==t));m(e)}else m(v)};s.addEventListener("submit",(async e=>{e.preventDefault();const t=s.searchQuery.value.trim();t?(d=1,p=t,await u(d)):g("Please enter a search query")})),h(0),u(d);
//# sourceMappingURL=catalog.46e33676.js.map
