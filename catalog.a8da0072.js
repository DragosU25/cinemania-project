!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=n.parcelRequirea071;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){r[e]=n},n.parcelRequirea071=a);var i,c,o=a("bpxeT"),s=a("2TvXO"),u=a("2Vquh"),l=document.querySelector(".gallery"),d=document.querySelector("form"),p=document.querySelector("#pagination"),f=document.querySelector("#message"),v=document.querySelector("#year-filter-container"),h=document.querySelector("#genre-filter-container"),m=(new Date).toISOString().split("T")[0],g=(i=e(o)(e(s).mark((function n(){var t,r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getTrendingMovies)();case 2:return t=e.sent,r=t.filter((function(e){return e.release_date<=m})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),n)}))),function(){return i.apply(this,arguments)}),y=1,b="popular",w="https://image.tmdb.org/t/p/w500",L="../images/hero-image.jpg",x=[],S=(c=e(o)(e(s).mark((function n(t){var r,a;return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,u.getGenres)();case 2:r=n.sent,a=t.map((function(e){var n=e.genre_ids.map((function(e){return r[e]||"Unknown"})).join(", "),t=e.poster_path?"".concat(w).concat(e.poster_path):L;return'\n        <div class="search-section-movie" style="background: linear-gradient(180deg, rgba(0, 0, 0, 0.00) 63.48%, rgba(0, 0, 0, 0.90) 92.16%), url(\''.concat(t,'\');" data-movie-id="').concat(e.id,'">\n          <div class="search-section-movie-card-info">\n            <h3 class="search-section-movie-card-title">').concat(e.name||e.title,'</h3> \n            <div class="search-section-movie-card-details">\n              <p class="search-section-movie-card-genre-year">').concat(n," | ").concat(new Date(e.release_date).getFullYear(),'</p>\n              <p class="search-section-movie-card-rate">').concat(e.vote_average,"</p>\n            </div>\n          </div>\n        </div>\n      ")})).join(""),l.innerHTML=a,l.querySelectorAll(".search-section-movie").forEach((function(n){n.addEventListener("click",function(){var a=e(o)(e(s).mark((function a(i){var c,o,u,l,d,p;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=n.dataset.movieId,o=t.find((function(e){return e.id==c})),u=o.genre_ids.map((function(e){return r[e]||"Unknown"})).join(", "),l='\n      <div class="search-movie-details-container">\n        <button class="close-btn">X</button>\n        <img src="'.concat(o.poster_path?w+o.poster_path:L,'" alt="').concat(o.title,'" width="248" height="315">\n        <div class="search-movie-details">\n          <h3 class="search-movie-title">').concat(o.title,'</h3>\n          <div class="search-movie-info-container">\n            <div class="search-movie-info">\n              <p class="search-info-title">Vote / Votes</p>\n              <p><span class="search-rating-span">').concat(o.vote_average,'</span> / <span class="search-rating-span">').concat(o.vote_count,'</span></p>\n            </div>\n            <div class="search-movie-info">\n              <p class="search-info-title">Popularity</p><span>').concat(o.popularity,'</span>\n            </div>\n            <div class="search-movie-info">\n              <p class="search-info-title">Genre</p><span>').concat(u,'</span>\n            </div>\n          </div>\n          <div class="search-about-info">\n            <p class="search-about-info-title">ABOUT</p>\n            <p class="search-overview">').concat(o.overview,'</p>\n          </div>\n          <button class="add-to-library-btn">').concat(H(o.id)?"Remove from library":"Add to my library","</button>\n        </div>\n      </div>\n    "),(d=document.getElementById("search-movie-details-container")).innerHTML=l,d.classList.remove("hidden"),document.querySelector(".close-btn").addEventListener("click",(function(){d.classList.add("hidden")})),(p=document.querySelector(".add-to-library-btn")).addEventListener("click",(function(){O(o),p.textContent=H(o.id)?"Remove from library":"Add to my library"}));case 10:case"end":return e.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}));case 6:case"end":return n.stop()}}),n)}))),function(e){return c.apply(this,arguments)}),T=function(){var n=e(o)(e(s).mark((function n(t){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=t,e.prev=1,e.next=4,(0,u.searchMovies)(b,y);case 4:r=e.sent,x=r.results,S(x),M(r.total_pages),_(),E(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),k("Something went wrong. Please try again.");case 16:case"end":return e.stop()}}),n,null,[[1,12]])})));return function(e){return n.apply(this,arguments)}}(),k=function(e){f.innerHTML="<p>".concat(e,"</p>"),l.innerHTML="",p.innerHTML=""},M=function(e){if(p.innerHTML="",!(e<=1)){if(y>1){var n=s("<");n.addEventListener("click",(function(){return T(y-1)})),p.appendChild(n)}var t=Math.min(3,e),r=y-Math.floor(t/2),a=(r=Math.max(1,r))+t-1;a=Math.min(e,a);for(var i=r;i<=a;i++){var c=s(i);i===y&&c.classList.add("active"),p.appendChild(c)}if(y<e){var o=s(">");o.addEventListener("click",(function(){return T(y+1)})),p.appendChild(o)}}function s(e){var n=document.createElement("button");return n.innerText=e,n.classList.add("pagination-button"),n.classList.add("light-mode"),e===y&&n.classList.add("active"),"<"!==e&&">"!==e&&n.addEventListener("click",(function(){return T(parseInt(e))})),n}},_=function(){var e=document.createElement("select");e.id="year-filter",e.classList.add("select"),e.innerHTML='<option value="">Year</option>';for(var n=2015;n<=2024;n++)e.innerHTML+='<option value="'.concat(n,'">').concat(n,"</option>");e.addEventListener("change",q),v.innerHTML="",v.appendChild(e)},E=function(){var n=e(o)(e(s).mark((function n(){var t,r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getGenres)();case 2:t=e.sent,(r=document.createElement("select")).id="genre-filter",r.classList.add("select"),r.innerHTML='<option value="">Genre</option>',Object.keys(t).forEach((function(e){r.innerHTML+='<option value="'.concat(e,'">').concat(t[e],"</option>")})),r.addEventListener("change",q),h.innerHTML="",h.appendChild(r);case 11:case"end":return e.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),q=function(){var e=document.querySelector("#year-filter").value,n=document.querySelector("#genre-filter").value,t=x;e&&(t=t.filter((function(n){return new Date(n.release_date).getFullYear()==e}))),n&&(t=t.filter((function(e){return e.genre_ids.includes(parseInt(n))}))),S(t)},H=function(e){return(JSON.parse(localStorage.getItem("library"))||[]).some((function(n){return n.id==e}))},O=function(e){var n=JSON.parse(localStorage.getItem("library"))||[];H(e.id)?(n=n.filter((function(n){return n.id!=e.id})),localStorage.setItem("library",JSON.stringify(n))):(n.push(e),localStorage.setItem("library",JSON.stringify(n)))},I=function(){var n=e(o)(e(s).mark((function n(){var t;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g();case 3:t=e.sent,S(x=t),_(),E(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),k("Something went wrong. Please try again.");case 14:case"end":return e.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}();d.addEventListener("submit",function(){var n=e(o)(e(s).mark((function n(t){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=d.searchQuery.value.trim()){e.next=5;break}return k("Please enter a search query"),e.abrupt("return");case 5:return y=1,b=r,e.next=9,T(y);case 9:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),I()}();
//# sourceMappingURL=catalog.a8da0072.js.map
