{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SACA,MAAMC,GAAc,IAAIC,MAAOC,cAAcC,MAAM,KAAK,GAmB/BC,WACvB,MAAMC,QAAe,EAAAP,EAAAQ,aAEfC,EAZkB,CAAAC,GACnBA,GAA4B,IAAlBA,EAAOC,OAKfD,EADaE,KAAKC,MAAMD,KAAKE,SAAWJ,EAAOC,SAH7C,KAUWI,MArBIT,iBACH,EAAAN,EAAAgB,sBACMC,QAAOC,GACZA,EAAMC,cACJjB,IAgBHkB,IAEfC,EAAyBC,SAASC,cACtC,6BAEIC,EAAef,EAAYgB,cAC7BhB,EAAYgB,cACZ,qBAEEC,EAAajB,EAAYkB,UAC5BC,KAAIC,GAAMtB,EAAOsB,IAAO,YACxBC,KAAK,MAER,GAAIrB,EAAa,CACf,IAAIsB,EAAO,0GACwFP,qHAG9Df,EAAYuB,qOAMTvB,EAAYU,4JAINV,EAAYwB,gBAAgBxB,EAAYyB,kPAMlCzB,EAAY0B,mJAIlBT,qHAKjCjB,EAAY2B,0IAOzBf,EAAuBgB,UAAYN,EAGnC,MAAMO,EAAahB,SAASC,cAAc,uBAC1Ce,EAAWC,iBAAiB,SAAS,KACnCC,EAAc/B,GACd6B,EAAWG,YAAcC,EAAYjC,EAAYoB,IAC7C,sBACA,mBAAmB,IAGzB,MAAMa,EAAcC,IACFC,KAAKC,MAAMC,aAAaC,QAAQ,aAAe,IAChDC,MAAKC,GAAeA,EAAYpB,IAAMc,IAGjDH,EAAgBtB,IACpB,IAAIgC,EAAUN,KAAKC,MAAMC,aAAaC,QAAQ,aAAe,GAEzDL,EAAYxB,EAAMW,KACpBqB,EAAUA,EAAQjC,QAAOkC,GAAQA,EAAKtB,IAAMpB,EAAYoB,KACxDiB,aAAaM,QAAQ,UAAWR,KAAKS,UAAUH,MAE/CA,EAAQI,KAAKpC,GACb4B,aAAaM,QAAQ,UAAWR,KAAKS,UAAUH,I,IAMvDK","sources":["src/scripts/upcoming-movies.js"],"sourcesContent":["import { getGenres, getUpcomingMovies } from '../scripts/movie-api';\nconst currentDate = new Date().toISOString().split('T')[0];\nconst getMoviesForToday = async () => {\n  const movies = await getUpcomingMovies();\n  const todayMovies = movies.filter(movie => {\n    const releaseDate = movie.release_date;\n    return releaseDate <= currentDate;\n  });\n  return todayMovies;\n};\n\nconst selectRandomMovie = movies => {\n  if (!movies || movies.length === 0) {\n    return null;\n  }\n\n  const randomIndex = Math.floor(Math.random() * movies.length);\n  return movies[randomIndex];\n};\n\nconst displayMovieInfo = async () => {\n  const genres = await getGenres();\n  const movies = await getMoviesForToday();\n  const randomMovie = selectRandomMovie(movies);\n  const upcomingMovieContainer = document.querySelector(\n    '.upcoming-movie-container'\n  );\n  const backdropPath = randomMovie.backdrop_path\n    ? randomMovie.backdrop_path\n    : 'default-poster.jpg';\n\n  const genreNames = randomMovie.genre_ids\n    .map(id => genres[id] || 'Unknown')\n    .join(', ');\n\n  if (randomMovie) {\n    let html = `\n      <div class=\"image-container\"  style=\"background-image: url('https://image.tmdb.org/t/p/original${backdropPath}')\">\n      </div>\n      <div class=\"upcoming-movie-details-container\">\n      <h2 class=\"upcoming-movie-title\">${randomMovie.title}</h2>\n\n       <div class=\"movie-info\">\n        <div class=\"upcoming-movie-details-flex-container\">\n        <div class=\"release-date \">\n            <span>Release date</span>\n            <span class=\"date align-left\">${randomMovie.release_date}</span>\n        </div>\n        <div class=\"votes\">\n            <span>Vote / Votes</span>\n            <span class=\"vote-count align-left\">${randomMovie.vote_count} / ${randomMovie.vote_average}</span>\n        </div>\n        </div>\n        <div class=\"upcoming-movie-details-flex-container\">\n        <div class=\"popularity\">\n            <span>Popularity</span>\n            <span class=\"popularity-score align-left\">${randomMovie.popularity}</span>\n        </div>\n        <div class=\"genre\">\n            <span>Genre</span>\n            <span class=\"genre-type align-left\">${genreNames}</span>\n        </div>\n        </div>\n        <div class=\"about\">\n            <h2>ABOUT</h2>\n            <p>${randomMovie.overview}</p>\n        </div>\n        <button class=\"add-to-library-btn\">Add to my library</button>\n    </div>\n      </div>\n        `;\n\n    upcomingMovieContainer.innerHTML = html;\n\n    // Adăugare eveniment pentru butonul de bibliotecă\n    const libraryBtn = document.querySelector('.add-to-library-btn');\n    libraryBtn.addEventListener('click', () => {\n      toggleLibrary(randomMovie);\n      libraryBtn.textContent = isInLibrary(randomMovie.id)\n        ? 'Remove from library'\n        : 'Add to my library';\n    });\n\n    const isInLibrary = movieId => {\n      const library = JSON.parse(localStorage.getItem('library')) || [];\n      return library.some(randomMovie => randomMovie.id == movieId);\n    };\n\n    const toggleLibrary = movie => {\n      let library = JSON.parse(localStorage.getItem('library')) || [];\n\n      if (isInLibrary(movie.id)) {\n        library = library.filter(item => item.id != randomMovie.id);\n        localStorage.setItem('library', JSON.stringify(library));\n      } else {\n        library.push(movie);\n        localStorage.setItem('library', JSON.stringify(library));\n      }\n    };\n  }\n};\n\ndisplayMovieInfo();\n"],"names":["$2bk9a","parcelRequire","$a73aec97a11a64c8$var$currentDate","Date","toISOString","split","async","genres","getGenres","randomMovie1","movies","length","Math","floor","random","$a73aec97a11a64c8$var$selectRandomMovie","getUpcomingMovies","filter","movie","release_date","$a73aec97a11a64c8$var$getMoviesForToday","upcomingMovieContainer","document","querySelector","backdropPath","backdrop_path","genreNames","genre_ids","map","id","join","html","title","vote_count","vote_average","popularity","overview","innerHTML","libraryBtn","addEventListener","toggleLibrary","textContent","isInLibrary","movieId","JSON","parse","localStorage","getItem","some","randomMovie","library","item","setItem","stringify","push","$a73aec97a11a64c8$var$displayMovieInfo"],"version":3,"file":"index.f0f45bdc.js.map"}