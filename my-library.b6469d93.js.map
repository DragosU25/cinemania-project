{"mappings":"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","sources":["src/scripts/hero-section.js"],"sourcesContent":["import {\n  getTrendingMovies,\n  getGenres,\n  getMovieTrailer,\n} from '../scripts/movie-api';\n\nconst currentDate = new Date().toISOString().split('T')[0];\n\nconst getMoviesForToday = async () => {\n  const movies = await getTrendingMovies();\n  const todayMovies = movies.filter(movie => {\n    const releaseDate = movie.release_date;\n    return releaseDate <= currentDate;\n  });\n  return todayMovies;\n};\n\nconst selectRandomMovie = movies => {\n  if (!movies || movies.length === 0) {\n    return null;\n  }\n\n  const randomIndex = Math.floor(Math.random() * movies.length);\n  return movies[randomIndex];\n};\n\nconst truncateOverview = (overview, maxLength) => {\n  if (overview.length > maxLength) {\n    return overview.slice(0, maxLength) + '...';\n  }\n  return overview;\n};\n\nconst displayMovieInfo = async () => {\n  const genres = await getGenres();\n  const movies = await getMoviesForToday();\n  const randomMovie = selectRandomMovie(movies);\n  const trailer = await getMovieTrailer(randomMovie.id);\n  const heroSection = document.querySelector('#hero-section');\n  const heroTitle = document.querySelector('#hero-title');\n  const heroRating = document.querySelector('#hero-rating');\n  const heroDescription = document.querySelector('#hero-description');\n  const heroButtonsContainer = document.querySelector('.hero-buttons');\n  const movieDetailsContainer = document.querySelector('.movie-card');\n  const trailerContainer = document.querySelector('.movie-trailer-container');\n\n  if (randomMovie) {\n    const movieGenres = randomMovie.genre_ids\n      .map(id => genres[id] || 'Unknown')\n      .join(', ');\n    heroSection.style.background = `linear-gradient(87deg, #111 33.93%, rgba(17, 17, 17, 0.00) 78.91%), url('https://image.tmdb.org/t/p/original${randomMovie.backdrop_path}') lightgray`;\n    heroSection.style.backgroundSize = 'cover';\n    heroSection.style.backgroundPosition = 'center';\n    heroSection.style.backgroundRepeat = 'no-repeat';\n    heroTitle.textContent = randomMovie.title;\n    heroRating.textContent = `Rating:  ${randomMovie.vote_average}`;\n    heroDescription.textContent = truncateOverview(randomMovie.overview, 250);\n\n    heroButtonsContainer.addEventListener('click', e => {\n      e.preventDefault();\n      if (e.target.id === 'more-details') {\n        let html = `\n        \n        <div class=\"hero-movie-details-container\">\n        <button class=\"close-btn\">X</button>\n          <img src=\"https://image.tmdb.org/t/p/original${randomMovie.poster_path}\" alt=\"${randomMovie.title}\" width=\"248\" height=\"315\">\n           <div class=\"hero-movie-details\">\n          <h3 class=\"hero-movie-title\">${randomMovie.title}</h3>\n          <div class=\"hero-movie-info-container\">\n            <div class=\"hero-movie-info\">\n              <p class=\"hero-info-title\"</p>Vote / Votes</p>\n              <p><span class=\"hero-rating-span\">${randomMovie.vote_average}</span> / <span class=\"hero-rating-span\">${randomMovie.vote_count}</span></p>\n            </div>\n            <div class=\"hero-movie-info\">\n              <p class=\"hero-info-title\">Popularity</p><span>${randomMovie.popularity}</span>\n            </div>\n            <div class=\"hero-movie-info\">\n              <p class=\"hero-info-title\">Genre</p><span>${movieGenres}</span>\n            </div>\n          </div>\n          <div class=\"hero-about-info\">\n          <p class=\"hero-info-title\">ABOUT</p>\n          <p class=\"hero-overview\">${randomMovie.overview}</p>\n          </div>\n\n          <button class=\"add-to-library-btn\">Add to my library</button>\n          </div>\n        </div>\n        `;\n        movieDetailsContainer.innerHTML = html;\n        movieDetailsContainer.classList.remove('is-hidden');\n\n        // Adăugare eveniment pentru închiderea detaliilor\n        const closeBtn = document.querySelector('.close-btn');\n        closeBtn.addEventListener('click', () => {\n          movieDetailsContainer.classList.add('is-hidden');\n        });\n\n        // Adăugare eveniment pentru butonul de bibliotecă\n        const libraryBtn = document.querySelector('.add-to-library-btn');\n        libraryBtn.addEventListener('click', () => {\n          toggleLibrary(randomMovie);\n          libraryBtn.textContent = isInLibrary(randomMovie.id)\n            ? 'Remove from library'\n            : 'Add to my library';\n        });\n\n        const isInLibrary = movieId => {\n          const library = JSON.parse(localStorage.getItem('library')) || [];\n          return library.some(randomMovie => randomMovie.id == movieId);\n        };\n\n        const toggleLibrary = movie => {\n          let library = JSON.parse(localStorage.getItem('library')) || [];\n\n          if (isInLibrary(movie.id)) {\n            library = library.filter(item => item.id != movie.id);\n            localStorage.setItem('library', JSON.stringify(library));\n          } else {\n            library.push(movie);\n            localStorage.setItem('library', JSON.stringify(library));\n          }\n        };\n      } else if (e.target.id === 'watch-trailer') {\n        if (trailer && trailer.key) {\n          let html = `\n        <button class=\"close-btn\">X</button>\n        <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/${trailer.key}\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n    `;\n          trailerContainer.innerHTML = html;\n          trailerContainer.classList.remove('is-hidden');\n        } else {\n          trailerContainer.classList.add('error-container');\n          let html = `\n        <button class=\"close-btn\">X</button>\n        <p class=\"text-warning\">OOPS...<br>\n        We are very sorry!<br>\n        But we couldn’t find the trailer.</p>\n    `;\n          trailerContainer.innerHTML = html;\n          trailerContainer.classList.remove('is-hidden');\n        }\n\n        const trailerCloseBtn = trailerContainer.querySelector('.close-btn');\n        trailerCloseBtn.addEventListener('click', () => {\n          trailerContainer.classList.add('is-hidden');\n        });\n      }\n    });\n  } else {\n    heroSection.style.background = \"url('../images/hero-image.jpg') !important\";\n    heroSection.style.backgroundSize = 'cover';\n    heroSection.style.backgroundPosition = 'center';\n    heroSection.style.backgroundRepeat = 'no-repeat';\n    heroTitle.textContent = 'Let’s Make Your Own Cinema';\n    heroDescription.textContent =\n      \"Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.\";\n    let buttonHtml = `<button class=\"get-started-button\">Get Started</button>`;\n    heroButtonsContainer.innerHTML = buttonHtml;\n  }\n};\n\ndisplayMovieInfo();\n"],"names":["$bpxeT","parcelRequire","$03e148cf39033957$var$currentDate","Date","toISOString","split","$03e148cf39033957$var$getMoviesForToday","$parcel$interopDefault","$2TvXO","mark","_callee","movies","todayMovies","$2Vquh","getTrendingMovies","_ctx","sent","filter","movie","release_date","$03e148cf39033957$var$selectRandomMovie","length","Math","floor","random","$03e148cf39033957$var$displayMovieInfo","genres","randomMovie1","trailer","heroSection","heroTitle","heroRating","heroDescription","heroButtonsContainer","movieDetailsContainer","trailerContainer","movieGenres","getGenres","getMovieTrailer","id","document","querySelector","genre_ids","map","join","style","background","concat","backdrop_path","backgroundSize","backgroundPosition","backgroundRepeat","textContent","title","vote_average","overview","maxLength","slice","addEventListener","e","preventDefault","target","html","poster_path","vote_count","popularity","innerHTML","classList","remove","add","libraryBtn","toggleLibrary","isInLibrary","movieId","JSON","parse","localStorage","getItem","some","randomMovie","library","item","setItem","stringify","push","key","html1"],"version":3,"file":"my-library.b6469d93.js.map"}